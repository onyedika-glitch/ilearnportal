<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Student Board</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        html, body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
        }
        .hidden { display: none; }
        .sidebar-link {
            @apply flex items-center p-3 text-gray-300 rounded-lg hover:bg-gray-700 transition-colors duration-200;
        }
        .sidebar-link.active { @apply bg-blue-600 text-white; }
        .admin-sidebar-link.active { @apply bg-red-600 text-white; }

        .widget { @apply bg-gray-800 p-6 rounded-xl border border-gray-700; }
        input, textarea, select { @apply w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-white; }
    </style>
</head>
<body class="text-gray-200">

    <!-- =================================================================
    PAGE WRAPPERS
    ================================================================== -->

    <!-- AUTH PAGE (LOGIN / REGISTER) -->
    <div id="page-auth">
        <div class="min-h-screen flex">
            <div class="hidden lg:flex w-1/2 bg-gray-800 items-center justify-center p-12">
                 <div class="text-center">
                    <svg class="w-24 h-24 mx-auto mb-4 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.253v11.494m-9-5.747h18"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 12a8.25 8.25 0 1016.5 0 8.25 8.25 0 00-16.5 0z"></path></svg>
                    <h1 class="text-4xl font-bold text-white mb-2">University Board</h1>
                    <p class="text-gray-400">Your central hub for academic success.</p>
                </div>
            </div>
            <div class="w-full lg:w-1/2 flex items-center justify-center p-8">
                <div class="w-full max-w-md">
                    <div id="auth-container"></div> <!-- JS populates login/register form here -->
                    <p class="text-center text-xs text-gray-500 mt-8"><a href="#" onclick="showPage('page-admin-login')" class="hover:underline">Admin Login</a></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- STUDENT DASHBOARD -->
    <div id="page-dashboard" class="hidden">
        <div class="flex h-screen bg-gray-900">
            <aside class="w-64 flex-shrink-0 bg-gray-800 border-r border-gray-700 flex flex-col">
                <div class="h-20 flex items-center justify-center text-2xl font-bold text-white">University Board</div>
                <nav class="flex-1 px-4 py-4 space-y-2" id="dashboard-nav"></nav>
                <div class="px-4 py-4">
                    <button onclick="logout()" class="sidebar-link w-full">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                        <span class="ml-3">Logout</span>
                    </button>
                </div>
            </aside>
            <main class="flex-1 overflow-y-auto">
                <header class="h-20 flex items-center justify-between px-8 border-b border-gray-700">
                    <h1 id="dashboard-title" class="text-2xl font-bold text-white"></h1>
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-300">Welcome, <span id="user-name" class="font-semibold"></span></span>
                        <img class="w-10 h-10 rounded-full" src="https://i.pravatar.cc/150?u=a042581f4e29026704d" alt="user photo">
                    </div>
                </header>
                <div class="p-8" id="dashboard-content"></div>
            </main>
        </div>
    </div>

    <!-- ADMIN LOGIN PAGE -->
    <div id="page-admin-login" class="hidden">
         <div class="min-h-screen flex items-center justify-center">
            <div class="w-full max-w-md">
                <h2 class="text-3xl font-bold mb-2 text-center text-white">Admin Panel</h2>
                <p class="text-gray-400 mb-8 text-center">Please sign in to manage the board.</p>
                <form id="admin-login-form" class="widget">
                    <div class="mb-4">
                        <label for="admin-email" class="block text-sm font-medium text-gray-400 mb-2">Email</label>
                        <input type="email" id="admin-email" value="admin@university.edu" required>
                    </div>
                    <div class="mb-6">
                        <label for="admin-password" class="block text-sm font-medium text-gray-400 mb-2">Password</label>
                        <input type="password" id="admin-password" value="adminpass" required>
                    </div>
                    <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">Sign In as Admin</button>
                    <p class="text-center text-xs text-gray-500 mt-6"><a href="#" onclick="showPage('page-auth')" class="hover:underline">Return to Student Login</a></p>
                </form>
            </div>
        </div>
    </div>
    
    <!-- ADMIN DASHBOARD -->
    <div id="page-admin-dashboard" class="hidden">
        <div class="flex h-screen bg-gray-900">
            <aside class="w-64 flex-shrink-0 bg-gray-800 border-r border-gray-700 flex flex-col">
                <div class="h-20 flex items-center justify-center text-2xl font-bold text-red-500">ADMIN PANEL</div>
                <nav class="flex-1 px-4 py-4 space-y-2" id="admin-dashboard-nav"></nav>
                <div class="px-4 py-4">
                    <button onclick="logout()" class="sidebar-link w-full">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                        <span class="ml-3">Logout</span>
                    </button>
                </div>
            </aside>
            <main class="flex-1 overflow-y-auto">
                 <header class="h-20 flex items-center justify-between px-8 border-b border-gray-700">
                    <h1 id="admin-dashboard-title" class="text-2xl font-bold text-white"></h1>
                </header>
                <div class="p-8" id="admin-dashboard-content"></div>
            </main>
        </div>
    </div>
    
    <script>
        // --- MOCK DATABASE ---
        let state = {
            user: {
                name: 'Alex Johnson',
                email: 'student@university.edu',
                studentId: 'U2023CS101',
                major: 'Computer Science',
                gpa: 3.85,
            },
            announcements: [
                { id: 1, title: 'Final Exam Schedules Posted', date: '2023-12-01', content: 'The final examination schedules for all departments have now been posted. Please check your department\'s section for details.' },
                { id: 2, title: 'Campus Library Extended Hours', date: '2023-11-28', content: 'To facilitate studying for finals, the main campus library will have extended hours, staying open until 2 AM from next Monday.' },
                { id: 3, title: 'Winter Break Housing Application', date: '2023-11-25', content: 'Students requiring on-campus housing during the winter break must submit their applications by December 5th.' },
            ],
            events: [
                { id: 1, title: 'End of Semester Mixer', date: '2023-12-18', time: '7:00 PM', location: 'Student Union Hall' },
                { id: 2, title: 'Guest Lecture: Quantum Computing', date: '2023-12-20', time: '2:00 PM', location: 'Science Hall 101' },
                { id: 3, title: 'Charity Bake Sale', date: '2023-12-15', time: '11:00 AM', location: 'Main Quad' },
            ],
            courses: [
                { code: 'CS305', name: 'Software Engineering', instructor: 'Dr. Emily Carter' },
                { code: 'CS410', name: 'Artificial Intelligence', instructor: 'Prof. Benida Jone' },
                { code: 'MA201', name: 'Linear Algebra', instructor: 'Dr. Alan Grant' },
                { code: 'PH105', name: 'Physics for Engineers', instructor: 'Dr. Ian Malcolm' },
            ],
            timetable: [
                { day: 'Monday', time: '10:00 AM', course: 'Software Engineering', venue: 'Hall C' },
                { day: 'Tuesday', time: '01:00 PM', course: 'Artificial Intelligence', venue: 'Lab 5A' },
                { day: 'Wednesday', time: '09:00 AM', course: 'Linear Algebra', venue: 'Room 201' },
                { day: 'Thursday', time: '11:00 AM', course: 'Artificial Intelligence', venue: 'Lab 5A' },
                { day: 'Friday', time: '02:00 PM', course: 'Physics for Engineers', venue: 'Physics Hall' },
            ],
            grades: { 'CS101': { name: 'Intro to Programming', grade: 'A' }, 'MA101': { name: 'Calculus I', grade: 'A-' }, 'CS202': { name: 'Data Structures', grade: 'B+' }, 'EN101': { name: 'English Composition', grade: 'A' } },
            auth: {
                isAuthenticated: false,
                isAdmin: false,
            },
            admin: {
                editingAnnouncementId: null,
            }
        };

        // --- CORE APP & AUTH LOGIC ---
        const pages = ['page-auth', 'page-dashboard', 'page-admin-login', 'page-admin-dashboard'];
        function showPage(pageId) {
            pages.forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
        }

        function renderAuthForms(mode = 'login') {
            const container = document.getElementById('auth-container');
            if (mode === 'login') {
                container.innerHTML = `
                    <h2 class="text-3xl font-bold mb-2 text-white">Welcome Back</h2>
                    <p class="text-gray-400 mb-8">Please sign in to your account.</p>
                    <form id="login-form">
                        <div class="mb-4"><input type="email" id="login-email" value="student@university.edu" required></div>
                        <div class="mb-6"><input type="password" id="login-password" value="password123" required></div>
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg">Sign In</button>
                        <p class="text-center text-sm text-gray-400 mt-6">Don't have an account? <a href="#" onclick="renderAuthForms('register')" class="font-medium text-blue-500 hover:underline">Register</a></p>
                    </form>`;
                document.getElementById('login-form').addEventListener('submit', loginUser);
            } else {
                 container.innerHTML = `
                    <h2 class="text-3xl font-bold mb-2 text-white">Create Account</h2>
                    <p class="text-gray-400 mb-8">Join the student community.</p>
                    <form id="register-form">
                        <div class="mb-4"><input type="text" id="register-name" placeholder="Full Name" required></div>
                        <div class="mb-4"><input type="email" id="register-email" placeholder="Email Address" required></div>
                        <div class="mb-6"><input type="password" id="register-password" placeholder="Password" required></div>
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg">Create Account</button>
                        <p class="text-center text-sm text-gray-400 mt-6">Already have an account? <a href="#" onclick="renderAuthForms('login')" class="font-medium text-blue-500 hover:underline">Sign In</a></p>
                    </form>`;
                document.getElementById('register-form').addEventListener('submit', loginUser);
            }
        }

        function loginUser(e) {
            e.preventDefault();
            state.auth.isAuthenticated = true;
            state.auth.isAdmin = false;
            showPage('page-dashboard');
            renderUserDashboard();
        }

        document.getElementById('admin-login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('admin-email').value;
            const pass = document.getElementById('admin-password').value;
            if (email === 'admin@university.edu' && pass === 'adminpass') {
                state.auth.isAuthenticated = true;
                state.auth.isAdmin = true;
                showPage('page-admin-dashboard');
                renderAdminDashboard();
            } else {
                alert('Invalid admin credentials.');
            }
        });

        function logout() {
            state.auth.isAuthenticated = false;
            state.auth.isAdmin = false;
            showPage('page-auth');
        }

        // --- STUDENT DASHBOARD VIEWS & RENDERING ---
        const userDashboardViews = {
            overview: { title: 'Dashboard', icon: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"></path></svg>', render: renderUserOverview },
            announcements: { title: 'Announcements', icon: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-2.236 9.168-5.584M15 13a3 3 0 11-6 0M3 17a3 3 0 106 0M15 17a3 3 0 11-6 0"></path></svg>', render: renderUserAnnouncements },
            courses: { title: 'My Courses', icon: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v11.494m-9-5.747h18"></path></svg>', render: renderUserCourses },
            timetable: { title: 'Timetable', icon: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>', render: renderUserTimetable },
            grades: { title: 'Grades', icon: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>', render: renderUserGrades },
            events: { title: 'Events', icon: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>', render: renderUserEvents },
            profile: { title: 'Profile', icon: '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>', render: renderUserProfile }
        };

        function renderUserDashboard(activeView = 'overview') {
            document.getElementById('user-name').textContent = state.user.name;
            document.getElementById('dashboard-nav').innerHTML = Object.keys(userDashboardViews).map(key => `<a href="#" onclick="renderUserDashboard('${key}')" class="sidebar-link ${key === activeView ? 'active' : ''}">${userDashboardViews[key].icon}<span class="ml-3 font-medium">${userDashboardViews[key].title}</span></a>`).join('');
            document.getElementById('dashboard-title').textContent = userDashboardViews[activeView].title;
            userDashboardViews[activeView].render();
        }
        
        // --- STUDENT RENDER FUNCTIONS ---
        function renderUserOverview() {
            // content for overview page...
        }
        
        function renderUserAnnouncements(searchTerm = '') {
            const filteredAnnouncements = state.announcements.filter(a => a.title.toLowerCase().includes(searchTerm.toLowerCase()));
            document.getElementById('dashboard-content').innerHTML = `
                <div class="mb-6"><input type="search" placeholder="Search announcements..." oninput="renderUserAnnouncements(this.value)" value="${searchTerm}"></div>
                <div class="space-y-6">
                ${filteredAnnouncements.map(a => `<div class="widget"><h3 class="text-xl font-bold text-white">${a.title}</h3><p class="text-sm text-gray-400 mb-2">Posted: ${a.date}</p><p>${a.content}</p></div>`).join('') || `<p>No announcements found.</p>`}
                </div>`;
        }

        function renderUserCourses(searchTerm = '') {
            const filteredCourses = state.courses.filter(c => c.name.toLowerCase().includes(searchTerm.toLowerCase()) || c.code.toLowerCase().includes(searchTerm.toLowerCase()));
             document.getElementById('dashboard-content').innerHTML = `
                <div class="mb-6"><input type="search" placeholder="Search by course name or code..." oninput="renderUserCourses(this.value)" value="${searchTerm}"></div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${filteredCourses.map(c => `<div class="widget"><span class="text-sm font-semibold text-blue-400">${c.code}</span><h3 class="text-xl font-bold text-white mt-1">${c.name}</h3><p class="text-gray-400 mt-1">Instructor: ${c.instructor}</p></div>`).join('') || `<p>No courses found.</p>`}
                </div>`;
        }
        
        function renderUserTimetable() { /* ... content from previous version ... */ }
        function renderUserGrades() { /* ... content from previous version ... */ }
        function renderUserEvents() { /* ... content from previous version ... */ }
        
        function renderUserProfile() {
            document.getElementById('dashboard-content').innerHTML = `
                <div class="widget max-w-2xl mx-auto">
                    <h2 class="text-2xl font-bold text-white mb-6">Student Profile</h2>
                    <div class="space-y-4">
                        <div class="flex justify-between"><span class="text-gray-400">Full Name:</span><span class="font-semibold">${state.user.name}</span></div>
                        <div class="flex justify-between"><span class="text-gray-400">Student ID:</span><span class="font-semibold">${state.user.studentId}</span></div>
                        <div class="flex justify-between"><span class="text-gray-400">Email Address:</span><span class="font-semibold">${state.user.email}</span></div>
                        <div class="flex justify-between"><span class="text-gray-400">Major:</span><span class="font-semibold">${state.user.major}</span></div>
                        <div class="flex justify-between"><span class="text-gray-400">Current GPA:</span><span class="font-semibold">${state.user.gpa}</span></div>
                    </div>
                </div>`;
        }


        // --- ADMIN DASHBOARD ---
        const adminDashboardViews = {
            announcements: { title: 'Manage Announcements', render: renderAdminAnnouncements },
            events: { title: 'Manage Events', render: renderAdminEvents },
        };
        
        function renderAdminDashboard(activeView = 'announcements') {
            document.getElementById('admin-dashboard-nav').innerHTML = Object.keys(adminDashboardViews).map(key => `<a href="#" onclick="renderAdminDashboard('${key}')" class="sidebar-link admin-sidebar-link ${key === activeView ? 'active' : ''}"><span class="ml-3 font-medium">${adminDashboardViews[key].title}</span></a>`).join('');
            document.getElementById('admin-dashboard-title').textContent = adminDashboardViews[activeView].title;
            adminDashboardViews[activeView].render();
        }
        
        function renderAdminAnnouncements() {
            const isEditing = state.admin.editingAnnouncementId !== null;
            const item = isEditing ? state.announcements.find(a => a.id === state.admin.editingAnnouncementId) : { title: '', content: '' };
            
            document.getElementById('admin-dashboard-content').innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1">
                        <form id="announcement-form" class="widget space-y-4">
                            <h3 class="text-xl font-bold text-white">${isEditing ? 'Edit' : 'Add New'} Announcement</h3>
                            <input type="hidden" id="ann-id" value="${item.id || ''}">
                            <div><label>Title</label><input type="text" id="ann-title" value="${item.title}" required></div>
                            <div><label>Content</label><textarea id="ann-content" rows="4" required>${item.content}</textarea></div>
                            <div class="flex space-x-2">
                                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">${isEditing ? 'Update' : 'Add'}</button>
                                ${isEditing ? `<button type="button" onclick="cancelEditAnnouncement()" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg">Cancel</button>` : ''}
                            </div>
                        </form>
                    </div>
                    <div class="lg:col-span-2 widget">
                        <h3 class="text-xl font-bold text-white mb-4">Existing Announcements</h3>
                        <ul class="space-y-3">
                        ${state.announcements.map(a => `
                            <li class="p-3 bg-gray-700 rounded-lg flex justify-between items-center">
                                <div><p class="font-semibold">${a.title}</p><p class="text-sm text-gray-400">${a.date}</p></div>
                                <div class="space-x-2">
                                    <button onclick="editAnnouncement(${a.id})" class="text-yellow-400 hover:text-yellow-300">Edit</button>
                                    <button onclick="deleteAnnouncement(${a.id})" class="text-red-500 hover:text-red-400">Delete</button>
                                </div>
                            </li>`).join('')}
                        </ul>
                    </div>
                </div>`;
            document.getElementById('announcement-form').addEventListener('submit', saveAnnouncement);
        }

        function saveAnnouncement(e) {
            e.preventDefault();
            const id = parseInt(document.getElementById('ann-id').value);
            const title = document.getElementById('ann-title').value;
            const content = document.getElementById('ann-content').value;
            
            if (id) { // Update existing
                const index = state.announcements.findIndex(a => a.id === id);
                state.announcements[index] = { ...state.announcements[index], title, content };
            } else { // Add new
                const newId = Math.max(...state.announcements.map(a => a.id)) + 1;
                const newAnnouncement = { id: newId, title, content, date: new Date().toISOString().split('T')[0] };
                state.announcements.unshift(newAnnouncement);
            }
            state.admin.editingAnnouncementId = null;
            renderAdminAnnouncements();
        }

        function editAnnouncement(id) {
            state.admin.editingAnnouncementId = id;
            renderAdminAnnouncements();
        }

        function cancelEditAnnouncement() {
            state.admin.editingAnnouncementId = null;
            renderAdminAnnouncements();
        }

        function deleteAnnouncement(id) {
            if (confirm('Are you sure you want to delete this announcement?')) {
                state.announcements = state.announcements.filter(a => a.id !== id);
                renderAdminAnnouncements();
            }
        }
        
        function renderAdminEvents() {
            document.getElementById('admin-dashboard-content').innerHTML = '<div class="widget"><p>Event management UI would go here, similar to announcements.</p></div>';
        }


        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderAuthForms('login');
            showPage('page-auth');
        });
    </script>
</body>
</html>

